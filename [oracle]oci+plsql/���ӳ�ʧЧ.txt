1楼 发表于 2007-03-19 10:40 | 只看该作者

如题。
    现象如下：
    用OCCI 的StatelessConnectionPool 创建连接池
    一定时间以后，比如几小时后，
    用OCCI 的Connection ** ppConn = StatelessConnectionPool * pConn->getConnection()
      的到的ppConn 有值，但是不能用，比如不能执行SQL语句，不能执行存储过程。
    ORACLE 的错误代码为ORA-03114

注：
    如果创建连接池以后，马上用，是没有任何问题的。

请大家赐教。小弟不胜感激！


-------------------------------------------------------------------------

2楼 发表于 2007-03-19 10:46 | 只看该作者

连接过一段时间可能会失效，
所以你的连接池创建以后，要定期检测这些连接，
如果连接失效，则删除这个，并重新创建一个。

-------------------------------------------------------------------------

5楼 发表于 2007-03-19 11:15 | 只看该作者

可是我发现，是整个池都不能用了！！！更糟糕的是我没有发现StatelessConnectionPool，
Connection 两个类中有哪个函数是用于判断他的状态的，我现在判断他是否能用，
都是让它执行一个简单的SELECT语句，看是否能成功。寒呀！！！

-------------------------------------------------------------------------

6楼 发表于 2007-03-19 11:17 | 只看该作者

我对它也不是很熟，
你需要查看它的文档了。
以前我用过OTL，
感觉不错。

-------------------------------------------------------------------------

7楼 发表于 2007-03-20 23:42 | 只看该作者

据我所知判断连接的真正状态只能和服务器通讯才可以，可以在池内做一个定期更新连接的方法


-------------------------------------------------------------------------

8楼 发表于 2007-08-22 18:03 | 只看该作者

好像只能对这三种DB12571,  DB3113, DB3114 异常码判断是否连接断了,断了的话,重新创建pool哦

ORA-03113: end-of-file on communication channel.
ORA-03114 not connected to ORACLE.