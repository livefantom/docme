今天我不e的其他指令，就光在 vim 中的「 :s 」指令。小 :s 表示置Q(substitute)的意思，不^通常你用 vim 下 :h :s 指令的r候看到@拥漠面：



其@一串|西就是在f :s @指令的格式要怎N下。

Range:

一般於整份文件都要作置Q的，我都下像@拥闹噶睿

:%s/, /，/g

最前面的「%」就是表示全域，也就是F在的@一份文件都要作後面取代的工作。那@指令就是f要把半形的逗c「,」成全形「，」。那後面「g」又代表什N意思呢？在 g @谖簧系|西是用肀硎δ壳斑@指令所做的~外的x。就拿 g 碚f， g 代表在文件中每一出F的半形逗c都要置Q成全形。或S你不是已用「%」表示全域了幔怎N又要用 g 呢？我@诱f，「%」用肀硎奈募的第一行到最後一行。但是在比(match)的r候，如果不加「g」@~外x的， vim 只把每一行比Φ降牡谝作取代，同行其他也 match 到的就不管了。所以用「g」表示每一行中每一比Φ降亩家置Q。

所以同理，如果你要把那些因 un*ix 和 DOS 之g格式不合所造成的^M消掉的，也只需要下成@泳涂梢粤耍

:%s/^M//g

可是有r候你想要作置Q的只是文件中的某一部份的怎Nk？不要o，得x取模式幔吭谀阆胫Q部分的_^按下大「V」然後用移佑(我之前v的 vim 移佑说姆椒ㄔ谶x取模式下都可以用)到你想要的位置之後按「:」就跳到入指令的B，如下D最下面那行看到的一樱



然你很_定行担你也可以@酉拢

:1,300s/vim/VIM/g

或者是如果你很_定要默F在游怂在行之後的所有行都置Q，可以下成：

:.,$s/vim/VIM/g

冒一_^的那一小c「 . 」就代表游爽F在所在行，「$」t用肀硎咀钺嵋恍小

或S明的你已想到怎N涌梢默F在所在行之前的都要置Q了，

:.,1s/vim/VIM/g

不^你@哟虻r候， vim 跳出硪息：

Backwards range given, OK to swap (y/n)?

@就是f你o了一起始行当冉Y束行颠要大的。@是因 vim 所定的都是男〉酱螅如果你要拇蟮叫〔皇遣恍校只是多息_J你]有打eT了。

Pattern:

像前面f，固定字串像把半形逗cQ成全形逗c@都容易，如果只是格式固定，但是字串热釉觞Nk？就像去 HTML tag 的r候就很麻。

得我在\vim那r候提^的指令幔

:%s/\n/^V/g 
:%s/< [^<>]*>//g 
:%s/^V/\n/g 
在中g的那一些 [^<>]*看起硐裢庑俏淖值模就是 pattern 比Φ闹髁ΑＪ上P於@些|西，我在 vim 的 search 搜すδ艿r候也有提到^一些。所以我今天就硌a一些上次]有v到的|西。

假如我F在有一P人名、的Y料，由於是S手的，上面自然就是]有排序^。那]排序^於想要在上面找Y料的人就很麻。f一人名不太清楚，a也得七七八八，m然f有 vim 方便的 search 功能，但是感X不足。(然@只是假O情r，因H上可能大家都已建立某N方便搜さ馁Y料炝)

我先假O人名、的L成@樱

w大明  1235478982
X小名  1223450012
王O李  5938123812
周渚l  1384914191
沈以情  2345934981
那我可不可以它成@幼樱

1235478982   w大明
1223450012   X小名
5938123812   王O李
1384914191   周渚l
2345934981   沈以情
我可以下@拥闹噶钔瓿蛇@工作：

:%s/\([^0-9]\{1,}\)\([0-9]\{1,}\)/\2 \1/g

前面橘色的部分 \([^0-9]\{1,}\) 用 \( \) 括起淼模表示@是一的卧，之後就可以依照它出F的序而使用 \1， \2，… ，泶表它。所以我可以看到 [^0-9] 就表示非底值牟糠郑後面的\{1,} 如果你得的，就是代表出F至少一次。不^@r候DKL跟你f用 vim 要文明一c，要用「\+」泶表至少出F一次。看人喜好了，如果你意多一些代替的符就多一c，你可以用 :h /multi 看到更多@些替代符。

所以把 pattern 用 \( \) 分_之後，我就可以用 \1，\2 戆阉交Q位置。

不^你可能f@舆]排序啊。我可以用x取模式把整份文件x起恚或是你械糜蒙舷伦笥腋淖，你可以用 ggVG (gg 跳到第一行之後，用大VM入x衲Ｊ剑以大G跳到最後一行)把整份文件x起碇後按 :!sort，@r候在你 vim 窗的最底下就成@樱

:’< ,'>!sort 

按<Enter>下去就成根每一行的最前^作排序的Y果。所以Y果就成：

1223450012   X小名
1235478982   w大明
1384914191   周渚l
2345934981   沈以情
5938123812   王O李
很伟桑 :p

如果你意配合捍嫫( registers )的，有r候也能省c力狻Ｔ谥v vim search 的r候，我曾提了用 <Ctrl+R>搭配底宙I 0 戆捍嫫 0 的|西叫出怼Ｍ拥模我不管用 / 或是 ? 等等入字串的r候，事上都已把要搜さ淖执入「/」的捍嫫餮e面，所以我只是想置Q的字串就是搜さ淖执的，我可以@幼觯

:%s/<Ctrl+R></>/用砣〈的字串/g

</>表示在按 <Ctrl+R>之後按下「/」@按I。@泳涂梢园阉さ淖执叫出K用之於置Q指令上。

~外指令：

我在前面到可以作像「g」@些的~外控制。那有哪些控制可以作呢？

比方f在我作置Q的r候，由於 vim AO是有大小的差e，如果你不管大小都要取代的，那可以用「i」@~外砜刂 vim 取代的r候就不管大小都作取代的工作。

不^有r候，我可能不太能_定是不是整份文件中的每一都要取代，那我就可以加「c」 confirm _J砜刂疲那使用上也很容易。 vim 在比Φ街後 

(y/n/a/q/l/^E/^Y)?

y 是代表绦心壳暗娜〈。 
n 是跳^。 
a 代表 always ，就是哪壳耙葬岬娜〈都绦小 
q t是不要作取代，K且x_要不要取代的B，K回到指令模式或原淼哪Ｊ较隆 
l t是 last 的意思，就是目前@取代绦嗅峋碗x_的取代模式，回到指令模式或原淼哪Ｊ较隆 
^E 表示往前一。 
^Y 表示往後一。 
於 :s 的用法到@e我就已把常用的方式都f完了。K於篇幅，我也Q定先到@e就好，不然一大篇，可能B有d趣M聿t解 vim 的人光看到就害怕了，怎N有k法w vim 的好呢？其P於 :s 的用法，有 pattern 有很多的方式在本篇中]有提到，你可以在 vim 中用 :h :s 看到更多的Y料。今天就 vim 吧!

